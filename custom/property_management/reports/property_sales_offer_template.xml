<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Enhanced Property Sales Offer Report Template -->
    <template id="property_sales_offer_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <style>
                            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap');
                            
                            * {
                                margin: 0;
                                padding: 0;
                                box-sizing: border-box;
                            }
                            
                            body {
                                font-family: 'Inter', sans-serif;
                                line-height: 1.6;
                                color: #2c3e50;
                            }
                            
                            .property-offer-header {
                                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                color: white;
                                padding: 40px 30px;
                                margin: -20px -20px 40px -20px;
                                border-radius: 0 0 20px 20px;
                                text-align: center;
                                position: relative;
                                overflow: hidden;
                            }
                            
                            .property-offer-header::before {
                                content: '';
                                position: absolute;
                                top: 0;
                                left: 0;
                                right: 0;
                                bottom: 0;
                                background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="white" opacity="0.1"><polygon points="0,0 1000,0 1000,100"/></svg>') no-repeat center;
                                background-size: cover;
                            }
                            
                            .header-content {
                                position: relative;
                                z-index: 2;
                            }
                            
                            .offer-title {
                                font-size: 48px;
                                font-weight: 700;
                                margin-bottom: 10px;
                                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
                            }
                            
                            .offer-subtitle {
                                font-size: 18px;
                                font-weight: 300;
                                opacity: 0.9;
                            }
                            
                            .property-showcase {
                                display: grid;
                                grid-template-columns: 1fr 1fr;
                                gap: 30px;
                                margin-bottom: 40px;
                                background: #ffffff;
                                border-radius: 15px;
                                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
                                overflow: hidden;
                            }
                            
                            .property-image-section {
                                position: relative;
                            }
                            
                            .property-main-image {
                                width: 100%;
                                height: 400px;
                                object-fit: cover;
                                border-radius: 15px 0 0 15px;
                            }
                            
                            .image-overlay {
                                position: absolute;
                                bottom: 0;
                                left: 0;
                                right: 0;
                                background: linear-gradient(transparent, rgba(0,0,0,0.7));
                                color: white;
                                padding: 20px;
                            }
                            
                            .property-details-section {
                                padding: 30px;
                                display: flex;
                                flex-direction: column;
                                justify-content: space-between;
                            }
                            
                            .property-title {
                                font-size: 28px;
                                font-weight: 600;
                                color: #2c3e50;
                                margin-bottom: 15px;
                            }
                            
                            .property-meta {
                                display: grid;
                                grid-template-columns: 1fr 1fr;
                                gap: 15px;
                                margin-bottom: 20px;
                            }
                            
                            .meta-item {
                                display: flex;
                                align-items: center;
                                padding: 10px;
                                background: #f8f9fa;
                                border-radius: 8px;
                            }
                            
                            .meta-icon {
                                width: 20px;
                                height: 20px;
                                margin-right: 10px;
                                color: #667eea;
                            }
                            
                            .price-highlight {
                                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                color: white;
                                padding: 20px;
                                border-radius: 12px;
                                text-align: center;
                                margin: 20px 0;
                            }
                            
                            .price-amount {
                                font-size: 36px;
                                font-weight: 700;
                                margin-bottom: 5px;
                            }
                            
                            .price-label {
                                font-size: 14px;
                                opacity: 0.9;
                            }
                            
                            .section-card {
                                background: white;
                                border-radius: 15px;
                                padding: 30px;
                                margin-bottom: 30px;
                                box-shadow: 0 5px 20px rgba(0,0,0,0.08);
                                border-left: 4px solid #667eea;
                            }
                            
                            .section-title {
                                font-size: 24px;
                                font-weight: 600;
                                color: #2c3e50;
                                margin-bottom: 20px;
                                display: flex;
                                align-items: center;
                            }
                            
                            .section-icon {
                                width: 24px;
                                height: 24px;
                                margin-right: 12px;
                                color: #667eea;
                            }
                            
                            .info-grid {
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                                gap: 20px;
                            }
                            
                            .info-item {
                                display: flex;
                                justify-content: space-between;
                                padding: 15px 0;
                                border-bottom: 1px solid #ecf0f1;
                            }
                            
                            .info-item:last-child {
                                border-bottom: none;
                            }
                            
                            .info-label {
                                font-weight: 500;
                                color: #7f8c8d;
                            }
                            
                            .info-value {
                                font-weight: 600;
                                color: #2c3e50;
                            }
                            
                            .payment-options {
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                                gap: 20px;
                                margin: 30px 0;
                            }
                            
                            .payment-plan {
                                background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                                border-radius: 15px;
                                padding: 25px;
                                border: 2px solid #dee2e6;
                                transition: all 0.3s ease;
                                position: relative;
                            }
                            
                            .payment-plan.recommended {
                                border-color: #667eea;
                                background: linear-gradient(135deg, #667eea10 0%, #764ba210 100%);
                            }
                            
                            .payment-plan.recommended::after {
                                content: 'RECOMMENDED';
                                position: absolute;
                                top: -10px;
                                right: 20px;
                                background: #667eea;
                                color: white;
                                padding: 5px 15px;
                                border-radius: 20px;
                                font-size: 12px;
                                font-weight: 600;
                            }
                            
                            .plan-title {
                                font-size: 20px;
                                font-weight: 600;
                                margin-bottom: 15px;
                                color: #2c3e50;
                            }
                            
                            .plan-details {
                                margin-bottom: 20px;
                            }
                            
                            .plan-detail {
                                display: flex;
                                justify-content: space-between;
                                margin-bottom: 8px;
                                padding: 5px 0;
                            }
                            
                            .plan-highlight {
                                background: #667eea;
                                color: white;
                                padding: 15px;
                                border-radius: 10px;
                                text-align: center;
                                margin-top: 15px;
                            }
                            
                            .installment-table {
                                width: 100%;
                                border-collapse: collapse;
                                margin-top: 20px;
                                background: white;
                                border-radius: 10px;
                                overflow: hidden;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                            }
                            
                            .installment-table th {
                                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                color: white;
                                padding: 15px;
                                text-align: left;
                                font-weight: 600;
                            }
                            
                            .installment-table td {
                                padding: 12px 15px;
                                border-bottom: 1px solid #f1f3f4;
                            }
                            
                            .installment-table tr:nth-child(even) {
                                background: #f8f9fa;
                            }
                            
                            .installment-table tr:hover {
                                background: #e3f2fd;
                            }
                            
                            .status-badge {
                                display: inline-block;
                                padding: 4px 12px;
                                border-radius: 20px;
                                font-size: 12px;
                                font-weight: 600;
                                text-transform: uppercase;
                            }
                            
                            .status-available { background: #d4edda; color: #155724; }
                            .status-reserved { background: #fff3cd; color: #856404; }
                            .status-booked { background: #d1ecf1; color: #0c5460; }
                            .status-sold { background: #f8d7da; color: #721c24; }
                            .status-paid { background: #d4edda; color: #155724; }
                            .status-unpaid { background: #f8d7da; color: #721c24; }
                            
                            .floor-plan-section {
                                margin: 30px 0;
                                text-align: center;
                            }
                            
                            .floor-plan-image {
                                max-width: 100%;
                                height: auto;
                                border-radius: 15px;
                                box-shadow: 0 5px 20px rgba(0,0,0,0.1);
                            }
                            
                            .contact-section {
                                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                                color: white;
                                padding: 30px;
                                border-radius: 15px;
                                margin: 40px 0;
                            }
                            
                            .contact-grid {
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                                gap: 20px;
                            }
                            
                            .contact-item {
                                text-align: center;
                                padding: 20px;
                            }
                            
                            .contact-icon {
                                width: 40px;
                                height: 40px;
                                margin: 0 auto 15px;
                                color: #667eea;
                            }
                            
                            .footer-disclaimer {
                                background: #f8f9fa;
                                padding: 25px;
                                border-radius: 15px;
                                border-left: 4px solid #ffc107;
                                margin-top: 40px;
                                font-size: 13px;
                                line-height: 1.8;
                                color: #6c757d;
                            }
                            
                            .footer-disclaimer h4 {
                                color: #495057;
                                margin-bottom: 15px;
                                font-weight: 600;
                            }
                            
                            @media print {
                                .page-break {
                                    page-break-before: always;
                                }
                            }
                            
                            .amenities-grid {
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                                gap: 15px;
                                margin: 20px 0;
                            }
                            
                            .amenity-item {
                                display: flex;
                                align-items: center;
                                padding: 10px 15px;
                                background: #f8f9fa;
                                border-radius: 8px;
                                border-left: 3px solid #667eea;
                            }
                            
                            .amenity-icon {
                                width: 20px;
                                height: 20px;
                                margin-right: 10px;
                                color: #667eea;
                            }
                        </style>

                        <!-- Header Section -->
                        <div class="property-offer-header">
                            <div class="header-content">
                                <div class="offer-title">PROPERTY SALES OFFER</div>
                                <div class="offer-subtitle">Exclusive Investment Opportunity</div>
                            </div>
                        </div>

                        <!-- Property Showcase Section -->
                        <div class="property-showcase">
                            <div class="property-image-section">
                                <t t-if="o.property_image">
                                    <img class="property-main-image" 
                                         t-att-src="'data:image/png;base64,%s' % o.property_image.decode()" 
                                         alt="Property Image"/>
                                    <div class="image-overlay">
                                        <h3 t-field="o.name"/>
                                        <p t-field="o.address"/>
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="property-main-image" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                                        <div style="text-align: center;">
                                            <div style="font-size: 48px; margin-bottom: 10px;">üè¢</div>
                                            <div>Property Image</div>
                                        </div>
                                    </div>
                                </t>
                            </div>
                            
                            <div class="property-details-section">
                                <div>
                                    <h2 class="property-title" t-field="o.name"/>
                                    <div class="property-meta">
                                        <div class="meta-item">
                                            <span class="meta-icon">üìç</span>
                                            <span>
                                                <t t-if="o.address" t-esc="o.address"/>
                                                <t t-else="">Location TBD</t>
                                            </span>
                                        </div>
                                        <div class="meta-item">
                                            <span class="meta-icon">üèóÔ∏è</span>
                                            <span>
                                                <t t-if="o.project_name" t-esc="o.project_name"/>
                                                <t t-else="">Premium Project</t>
                                            </span>
                                        </div>
                                        <div class="meta-item">
                                            <span class="meta-icon">üè†</span>
                                            <span>
                                                <t t-if="o.property_type" t-esc="o.property_type"/>
                                                <t t-else="">Residential</t>
                                            </span>
                                        </div>
                                        <div class="meta-item">
                                            <span class="meta-icon">üìè</span>
                                            <span><t t-if="o.total_sqft"><t t-esc="'{:,.0f}'.format(o.total_sqft)"/> sqft</t><t t-else="">Area TBD</t></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="price-highlight">
                                    <div class="price-amount">
                                        <t t-esc="o.currency_id.symbol"/>
                                        <t t-esc="'{:,.0f}'.format(o.property_price)"/>
                                    </div>
                                    <div class="price-label">Starting Price</div>
                                </div>
                            </div>
                        </div>

                        <!-- Property Details Card -->
                        <div class="section-card">
                            <h3 class="section-title">
                                <span class="section-icon">üè¢</span>
                                Property Details
                            </h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="info-label">Property Reference</span>
                                    <span class="info-value" t-field="o.property_reference"/>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Tower/Block</span>
                                    <span class="info-value" t-field="o.tower"/>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Level/Floor</span>
                                    <span class="info-value" t-field="o.level"/>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Unit Number</span>
                                    <span class="info-value" t-field="o.unit_no"/>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Unit View</span>
                                    <span class="info-value" t-field="o.unit_view"/>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Developer</span>
                                    <span class="info-value" t-field="o.x_developer"/>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Price per Sqft</span>
                                    <span class="info-value">
                                        <t t-if="o.price_per_sqft">
                                            <t t-esc="o.currency_id.symbol"/>
                                            <t t-esc="'{:,.2f}'.format(o.price_per_sqft)"/>
                                        </t>
                                    </span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Property Status</span>
                                    <span class="info-value">
                                        <span t-if="o.state == 'available'" class="status-badge status-available">Available</span>
                                        <span t-if="o.state == 'reserved'" class="status-badge status-reserved">Reserved</span>
                                        <span t-if="o.state == 'booked'" class="status-badge status-booked">Booked</span>
                                        <span t-if="o.state == 'sold'" class="status-badge status-sold">Sold</span>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Flexible Payment Options -->
                        <div class="section-card">
                            <h3 class="section-title">
                                <span class="section-icon">üí≥</span>
                                Flexible Payment Plans
                            </h3>
                            
                            <div class="payment-options">
                                <!-- Option 1: Standard Plan -->
                                <div class="payment-plan">
                                    <h4 class="plan-title">Standard Plan</h4>
                                    <div class="plan-details">
                                        <div class="plan-detail">
                                            <span>Down Payment:</span>
                                            <span><strong>10%</strong></span>
                                        </div>
                                        <div class="plan-detail">
                                            <span>Installment Period:</span>
                                            <span><strong>60 Months</strong></span>
                                        </div>
                                        <div class="plan-detail">
                                            <span>Monthly Payment:</span>
                                            <span><strong><t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.0f}'.format(o.property_price * 0.9 / 60)"/></strong></span>
                                        </div>
                                    </div>
                                    <div class="plan-highlight">
                                        Down Payment: <t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.0f}'.format(o.property_price * 0.1)"/>
                                    </div>
                                </div>

                                <!-- Option 2: Recommended Plan -->
                                <div class="payment-plan recommended">
                                    <h4 class="plan-title">Premium Plan</h4>
                                    <div class="plan-details">
                                        <div class="plan-detail">
                                            <span>Down Payment:</span>
                                            <span><strong>20%</strong></span>
                                        </div>
                                        <div class="plan-detail">
                                            <span>Installment Period:</span>
                                            <span><strong>48 Months</strong></span>
                                        </div>
                                        <div class="plan-detail">
                                            <span>Monthly Payment:</span>
                                            <span><strong><t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.0f}'.format(o.property_price * 0.8 / 48)"/></strong></span>
                                        </div>
                                    </div>
                                    <div class="plan-highlight">
                                        Down Payment: <t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.0f}'.format(o.property_price * 0.2)"/>
                                    </div>
                                </div>

                                <!-- Option 3: Express Plan -->
                                <div class="payment-plan">
                                    <h4 class="plan-title">Express Plan</h4>
                                    <div class="plan-details">
                                        <div class="plan-detail">
                                            <span>Down Payment:</span>
                                            <span><strong>30%</strong></span>
                                        </div>
                                        <div class="plan-detail">
                                            <span>Installment Period:</span>
                                            <span><strong>36 Months</strong></span>
                                        </div>
                                        <div class="plan-detail">
                                            <span>Monthly Payment:</span>
                                            <span><strong><t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.0f}'.format(o.property_price * 0.7 / 36)"/></strong></span>
                                        </div>
                                    </div>
                                    <div class="plan-highlight">
                                        Down Payment: <t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.0f}'.format(o.property_price * 0.3)"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Costs Breakdown -->
                        <div class="section-card">
                            <h3 class="section-title">
                                <span class="section-icon">üí∞</span>
                                Cost Breakdown
                            </h3>
                            <table class="installment-table">
                                <thead>
                                    <tr>
                                        <th>Cost Component</th>
                                        <th>Percentage</th>
                                        <th>Amount</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Property Price</strong></td>
                                        <td>-</td>
                                        <td><t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.2f}'.format(o.property_price)"/></td>
                                        <td>Base property value</td>
                                    </tr>
                                    <tr>
                                        <td>DLD Fee</td>
                                        <td>4%</td>
                                        <td><t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.2f}'.format(o.property_price * 0.04)"/></td>
                                        <td>Dubai Land Department registration fee</td>
                                    </tr>
                                    <tr>
                                        <td>Admin Fee</td>
                                        <td>-</td>
                                        <td><t t-esc="o.currency_id.symbol"/>5,000</td>
                                        <td>Administrative processing fee</td>
                                    </tr>
                                    <tr style="background: #e8f4f8; font-weight: 600;">
                                        <td><strong>Total Investment</strong></td>
                                        <td>-</td>
                                        <td><strong><t t-esc="o.currency_id.symbol"/><t t-esc="'{:,.2f}'.format(o.property_price + (o.property_price * 0.04) + 5000)"/></strong></td>
                                        <td>Complete investment amount</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Floor Plan Section -->
                        <t t-if="o.floor_plan">
                            <div class="section-card">
                                <h3 class="section-title">
                                    <span class="section-icon">üìê</span>
                                    Floor Plan
                                </h3>
                                <div class="floor-plan-section">
                                    <img class="floor-plan-image" 
                                         t-att-src="'data:image/png;base64,%s' % o.floor_plan.decode()" 
                                         alt="Floor Plan"/>
                                </div>
                            </div>
                        </t>

                        <!-- Property Description -->
                        <t t-if="o.description">
                            <div class="section-card">
                                <h3 class="section-title">
                                    <span class="section-icon">üìã</span>
                                    Property Description
                                </h3>
                                <p style="font-size: 16px; line-height: 1.8; color: #495057;" t-field="o.description"/>
                            </div>
                        </t>

                        <!-- Property Amenities -->
                        <div class="section-card">
                            <h3 class="section-title">
                                <span class="section-icon">üèä‚Äç‚ôÇÔ∏è</span>
                                Premium Amenities
                            </h3>
                            <div class="amenities-grid">
                                <div class="amenity-item">
                                    <span class="amenity-icon">üèä‚Äç‚ôÇÔ∏è</span>
                                    <span>Swimming Pool</span>
                                </div>
                                <div class="amenity-item">
                                    <span class="amenity-icon">üèãÔ∏è‚Äç‚ôÇÔ∏è</span>
                                    <span>Fitness Center</span>
                                </div>
                                <div class="amenity-item">
                                    <span class="amenity-icon">üÖøÔ∏è</span>
                                    <span>Covered Parking</span>
                                </div>
                                <div class="amenity-item">
                                    <span class="amenity-icon">üõ°Ô∏è</span>
                                    <span>24/7 Security</span>
                                </div>
                                <div class="amenity-item">
                                    <span class="amenity-icon">üå≥</span>
                                    <span>Landscaped Gardens</span>
                                </div>
                                <div class="amenity-item">
                                    <span class="amenity-icon">üë∂</span>
                                    <span>Kids Play Area</span>
                                </div>
                                <div class="amenity-item">
                                    <span class="amenity-icon">üè™</span>
                                    <span>Retail Outlets</span>
                                </div>
                                <div class="amenity-item">
                                    <span class="amenity-icon">üöá</span>
                                    <span>Metro Access</span>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Information -->
                        <div class="contact-section">
                            <h3 class="section-title" style="color: white; margin-bottom: 30px;">
                                <span class="section-icon">üìû</span>
                                Contact Our Sales Team
                            </h3>
                            <div class="contact-grid">
                                <div class="contact-item">
                                    <div class="contact-icon">üìû</div>
                                    <h4 style="margin-bottom: 10px;">Call Us</h4>
                                    <p>+971 4 XXX XXXX</p>
                                    <p>Available 24/7</p>
                                </div>
                                <div class="contact-item">
                                    <div class="contact-icon">üìß</div>
                                    <h4 style="margin-bottom: 10px;">Email Us</h4>
                                    <p>sales@company.com</p>
                                    <p>Quick Response Guaranteed</p>
                                </div>
                                <div class="contact-item">
                                    <div class="contact-icon">üìç</div>
                                    <h4 style="margin-bottom: 10px;">Visit Us</h4>
                                    <p>Dubai, UAE</p>
                                    <p>Sales Office</p>
                                </div>
                            </div>
                        </div>

                        <!-- Footer Disclaimer -->
                        <div class="footer-disclaimer">
                            <h4>Important Terms &amp; Conditions</h4>
                            <ul style="list-style: none; padding: 0;">
                                <li>‚Ä¢ This offer is valid for 30 days from the date of issue and subject to availability.</li>
                                <li>‚Ä¢ All prices are inclusive of applicable VAT and subject to change without prior notice.</li>
                                <li>‚Ä¢ Payment schedule is flexible and can be customized based on buyer preferences.</li>
                                <li>‚Ä¢ Property handover is subject to completion of construction and all legal formalities.</li>
                                <li>‚Ä¢ All dimensions and areas mentioned are approximate and subject to final survey.</li>
                                <li>‚Ä¢ Images and floor plans are for illustration purposes and may vary from actual.</li>
                                <li>‚Ä¢ Terms and conditions as per the Sales and Purchase Agreement will apply.</li>
                            </ul>
                            <p style="margin-top: 20px; text-align: center; font-weight: 600; color: #495057;">
                                Generated on <t t-esc="datetime.datetime.now().strftime('%d %B %Y at %H:%M')"/>
                            </p>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- Report Action for Property Model -->
    <record id="action_property_sales_offer_report" model="ir.actions.report">
        <field name="name">Property Sales Offer</field>
        <field name="model">property.property</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">property_management.property_sales_offer_template</field>
        <field name="report_file">property_management.property_sales_offer_template</field>
        <field name="binding_model_id" ref="model_property_property"/>
        <field name="binding_type">report</field>
        <field name="print_report_name">'Property_Sales_Offer_%s' % (object.name.replace('/', '_'))</field>
        <field name="paperformat_id" ref="base.paperformat_euro"/>
    </record>
</odoo>